#!/usr/bin/env node

import { resolve, join, dirname } from 'path';
import { platform as _platform } from 'os';
import Command from "../lib/jasmine";
import Jasmine from "../lib/jasmine";

let projectBaseDir = resolve();

if (_platform() === 'win32') {
  // Future versions of glob will interpret backslashes as escape sequences on
  // all platforms, and Jasmine warns about them. Convert to slashes to avoid
  // the warning and future behavior change.
  projectBaseDir = projectBaseDir.replace(/\\/g, '/');
}

const jasmine = new Jasmine({ projectBaseDir });
const examplesDir = join(dirname(require.resolve('jasmine-core')), 'jasmine-core', 'example', 'node_example');
const command = new Command(resolve(), examplesDir, {
  print: console.log,
  platform: _platform,
});

command.run(jasmine, process.argv.slice(2));
